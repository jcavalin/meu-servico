webpackJsonp([1],{127:function(e,t,a){"use strict";var s=a(3);t.a={components:{QLayout:s.k,QList:s.l,QSideLink:s.p,QItemSide:s.j,QItemMain:s.i,QToolbar:s.q,QBtn:s.b,QIcon:s.f,QToolbarTitle:s.r},mounted:function(){this.$q.platform.is.desktop&&this.$refs.layout.toggleLeft()}}},128:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),r=a(3),n=a(134),o=a(164),i=a.n(o),l=a(166);a.n(l);a(129),s.a.use(i.a),s.a.config.productionTip=!1,s.a.use(r.s),new s.a({el:"#q-app",router:n.a,render:function(e){return e(a(168).default)},validations:{}})},129:function(e,t){},134:function(e,t,a){"use strict";var s=a(4),r=a(135),n=a(136);s.a.use(r.a),t.a=new r.a({routes:[{path:"/",component:n.a}]})},136:function(e,t,a){"use strict";function s(e){a(137)}var r=a(6),n=a(163),o=a(5),i=s,l=o(r.a,n.a,!1,i,null,null);t.a=l.exports},137:function(e,t){},159:function(e,t,a){function s(e){return a(r(e))}function r(e){var t=n[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var n={"./af":8,"./af.js":8,"./ar":9,"./ar-dz":10,"./ar-dz.js":10,"./ar-kw":11,"./ar-kw.js":11,"./ar-ly":12,"./ar-ly.js":12,"./ar-ma":13,"./ar-ma.js":13,"./ar-sa":14,"./ar-sa.js":14,"./ar-tn":15,"./ar-tn.js":15,"./ar.js":9,"./az":16,"./az.js":16,"./be":17,"./be.js":17,"./bg":18,"./bg.js":18,"./bm":19,"./bm.js":19,"./bn":20,"./bn.js":20,"./bo":21,"./bo.js":21,"./br":22,"./br.js":22,"./bs":23,"./bs.js":23,"./ca":24,"./ca.js":24,"./cs":25,"./cs.js":25,"./cv":26,"./cv.js":26,"./cy":27,"./cy.js":27,"./da":28,"./da.js":28,"./de":29,"./de-at":30,"./de-at.js":30,"./de-ch":31,"./de-ch.js":31,"./de.js":29,"./dv":32,"./dv.js":32,"./el":33,"./el.js":33,"./en-au":34,"./en-au.js":34,"./en-ca":35,"./en-ca.js":35,"./en-gb":36,"./en-gb.js":36,"./en-ie":37,"./en-ie.js":37,"./en-nz":38,"./en-nz.js":38,"./eo":39,"./eo.js":39,"./es":40,"./es-do":41,"./es-do.js":41,"./es-us":42,"./es-us.js":42,"./es.js":40,"./et":43,"./et.js":43,"./eu":44,"./eu.js":44,"./fa":45,"./fa.js":45,"./fi":46,"./fi.js":46,"./fo":47,"./fo.js":47,"./fr":48,"./fr-ca":49,"./fr-ca.js":49,"./fr-ch":50,"./fr-ch.js":50,"./fr.js":48,"./fy":51,"./fy.js":51,"./gd":52,"./gd.js":52,"./gl":53,"./gl.js":53,"./gom-latn":54,"./gom-latn.js":54,"./gu":55,"./gu.js":55,"./he":56,"./he.js":56,"./hi":57,"./hi.js":57,"./hr":58,"./hr.js":58,"./hu":59,"./hu.js":59,"./hy-am":60,"./hy-am.js":60,"./id":61,"./id.js":61,"./is":62,"./is.js":62,"./it":63,"./it.js":63,"./ja":64,"./ja.js":64,"./jv":65,"./jv.js":65,"./ka":66,"./ka.js":66,"./kk":67,"./kk.js":67,"./km":68,"./km.js":68,"./kn":69,"./kn.js":69,"./ko":70,"./ko.js":70,"./ky":71,"./ky.js":71,"./lb":72,"./lb.js":72,"./lo":73,"./lo.js":73,"./lt":74,"./lt.js":74,"./lv":75,"./lv.js":75,"./me":76,"./me.js":76,"./mi":77,"./mi.js":77,"./mk":78,"./mk.js":78,"./ml":79,"./ml.js":79,"./mr":80,"./mr.js":80,"./ms":81,"./ms-my":82,"./ms-my.js":82,"./ms.js":81,"./mt":83,"./mt.js":83,"./my":84,"./my.js":84,"./nb":85,"./nb.js":85,"./ne":86,"./ne.js":86,"./nl":87,"./nl-be":88,"./nl-be.js":88,"./nl.js":87,"./nn":89,"./nn.js":89,"./pa-in":90,"./pa-in.js":90,"./pl":91,"./pl.js":91,"./pt":92,"./pt-br":93,"./pt-br.js":93,"./pt.js":92,"./ro":94,"./ro.js":94,"./ru":95,"./ru.js":95,"./sd":96,"./sd.js":96,"./se":97,"./se.js":97,"./si":98,"./si.js":98,"./sk":99,"./sk.js":99,"./sl":100,"./sl.js":100,"./sq":101,"./sq.js":101,"./sr":102,"./sr-cyrl":103,"./sr-cyrl.js":103,"./sr.js":102,"./ss":104,"./ss.js":104,"./sv":105,"./sv.js":105,"./sw":106,"./sw.js":106,"./ta":107,"./ta.js":107,"./te":108,"./te.js":108,"./tet":109,"./tet.js":109,"./th":110,"./th.js":110,"./tl-ph":111,"./tl-ph.js":111,"./tlh":112,"./tlh.js":112,"./tr":113,"./tr.js":113,"./tzl":114,"./tzl.js":114,"./tzm":115,"./tzm-latn":116,"./tzm-latn.js":116,"./tzm.js":115,"./uk":117,"./uk.js":117,"./ur":118,"./ur.js":118,"./uz":119,"./uz-latn":120,"./uz-latn.js":120,"./uz.js":119,"./vi":121,"./vi.js":121,"./x-pseudo":122,"./x-pseudo.js":122,"./yo":123,"./yo.js":123,"./zh-cn":124,"./zh-cn.js":124,"./zh-hk":125,"./zh-hk.js":125,"./zh-tw":126,"./zh-tw.js":126};s.keys=function(){return Object.keys(n)},s.resolve=r,e.exports=s,s.id=159},161:function(e,t){},162:function(e,t){},163:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("div",{attrs:{id:"app"}},[a("h4",[e._v("Serviços")]),e._v(" "),a("calendar-view",{attrs:{"show-date":e.showDate,events:e.events},on:{"click-event":e.alterarEscala,setShowDate:e.setShowDate}})],1),e._v(" "),a("q-modal",{ref:"escalaModal",attrs:{"content-css":{minWidth:"50vw",minHeight:"55vh"}}},[a("q-modal-layout",[a("q-toolbar",{attrs:{slot:"header"},slot:"header"},[a("q-btn",{attrs:{flat:""},on:{click:function(t){e.$refs.escalaModal.close()}}},[a("q-icon",{attrs:{name:"keyboard_arrow_left"}})],1),e._v(" "),a("div",{staticClass:"q-toolbar-title"},[e.form.id?a("span",[e._v("Atualizar escala")]):a("span",[e._v("Adicionar escala")])])],1),e._v(" "),a("div",{staticClass:"layout-padding"},[a("q-input",{attrs:{"float-label":"Nome da pessoa",error:e.$v.form.nome.$error},on:{blur:e.$v.form.nome.$touch,keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.submit(t)}},model:{value:e.form.nome,callback:function(t){e.$set(e.form,"nome",t)},expression:"form.nome"}}),e._v(" "),a("q-input",{attrs:{type:"number","float-label":"Quantidade de dias de folga",error:e.$v.form.folga.$error},on:{blur:e.$v.form.folga.$touch,keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.submit(t)}},model:{value:e.form.folga,callback:function(t){e.$set(e.form,"folga",t)},expression:"form.folga"}}),e._v(" "),a("q-datetime",{attrs:{type:"date","float-label":"Data da preta",format:"DD/MM/YYYY",error:e.$v.form.preta.$error},on:{blur:e.$v.form.preta.$touch,keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.submit(t)}},model:{value:e.form.preta,callback:function(t){e.$set(e.form,"preta",t)},expression:"form.preta"}}),e._v(" "),a("q-datetime",{attrs:{type:"date","float-label":"Data da vermelha",format:"DD/MM/YYYY",error:e.$v.form.vermelha.$error},on:{blur:e.$v.form.vermelha.$touch,keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.submit(t)}},model:{value:e.form.vermelha,callback:function(t){e.$set(e.form,"vermelha",t)},expression:"form.vermelha"}}),e._v(" "),a("q-btn",{staticClass:"full-width",attrs:{icon:"add",color:"primary"},on:{click:e.submit}},[e.form.id?a("span",[e._v("Alterar escala")]):a("span",[e._v("Incluir escala")])]),e._v(" "),e.form.id?a("q-btn",{staticClass:"full-width margin-top",attrs:{icon:"delete_forever",color:"negative"}},[a("span",[e._v("Excluir escala")]),e._v(" "),a("q-popover",{ref:"popover"},[a("q-list",{attrs:{separator:"",link:""}},[a("q-item",{on:{click:e.excluirEscala}},[e._v("\n                             Sim, excluir esta escala!\n                         ")])],1)],1)],1):e._e()],1)],1)],1),e._v(" "),a("q-fixed-position",{attrs:{corner:"bottom-right",offset:[18,18]}},[a("q-btn",{attrs:{round:"",color:"primary",title:"Adicionar escala"},on:{click:e.adicionarEscala}},[a("q-icon",{attrs:{name:"add"}})],1)],1)],1)},r=[],n={render:s,staticRenderFns:r};t.a=n},167:function(e,t){},168:function(e,t,a){"use strict";function s(e){a(169)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(127),n=a(170),o=a(5),i=s,l=o(r.a,n.a,!1,i,null,null);t.default=l.exports},169:function(e,t){},170:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{ref:"layout",attrs:{view:"hHr LpR lFf","right-breakpoint":1100}},[a("q-toolbar",{attrs:{slot:"header"},slot:"header"},[a("q-btn",{attrs:{flat:""},on:{click:function(t){e.$refs.layout.toggleLeft()}}},[a("q-icon",{attrs:{name:"menu"}})],1),e._v(" "),a("q-toolbar-title",[e._v("\n      Meu serviço\n      "),a("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[e._v("0.0.2")])])],1),e._v(" "),a("div",{attrs:{slot:"left"},slot:"left"},[a("q-list",{attrs:{"no-border":"",link:"","inset-separator":""}},[a("q-side-link",{attrs:{item:"",to:"/"}},[a("q-item-side",{attrs:{icon:"assignment_ind"}}),e._v(" "),a("q-item-main",{attrs:{label:"Serviços",sublabel:"Calendário de escalas"}})],1),e._v(" "),a("q-side-link",{attrs:{item:"",to:"/feriados"}},[a("q-item-side",{attrs:{icon:"date_range"}}),e._v(" "),a("q-item-main",{attrs:{label:"Feriados",sublabel:"Contagem para vermelha"}})],1)],1)],1),e._v(" "),a("router-view")],1)},r=[],n={render:s,staticRenderFns:r};t.a=n},6:function(e,t,a){"use strict";var s=a(3),r=a(138),n=(a.n(r),a(0)),o=a.n(n),i=a(160),l=a.n(i);a(161),a(162),t.a={name:"home",data:function(){return{showDate:new Date,form:{id:null,nome:null,folga:null,preta:null,vermelha:null},escalas:{get:function(){var e=s.a.get.item("escalas");return e=e||[]},getById:function(e){var t=null;return this.get().forEach(function(a){if(a.id===e)return t=a}),t},add:function(e){e.id=Math.floor(999999999*Math.random())+1;var t=this.get();t.push(e),s.a.set("escalas",t)},update:function(e){var t=this.get();t.forEach(function(a,r){if(a.id===e.id)return t[r]=e,s.a.set("escalas",t),a})},delete:function(e){var t=this.get();t.splice(t.indexOf(e),1),s.a.set("escalas",t)}},feriados:{get:function(){var e=s.a.get.item("feriados");return e=e||["2018-01-01","2018-02-12","2018-02-13","2018-03-30","2018-04-21","2018-05-01","2018-05-31","2018-09-07","2018-10-12","2018-11-02","2018-11-15","2018-12-25","2019-01-01","2019-03-04","2019-03-05","2019-04-19","2019-04-21","2019-05-01","2019-06-20","2019-09-07","2019-10-12","2019-11-02","2019-11-15","2019-12-25","2020-01-01","2020-02-24","2020-02-25","2020-04-10","2020-04-21","2020-05-01","2020-06-11","2020-09-07","2020-10-12","2020-11-02","2020-11-15","2020-12-25"]},add:function(e){var t=this.get();t.push(e),s.a.set("feriados",t)},is:function(e){return this.get().includes(o()(e).format("YYYY-MM-DD"))}},events:[]}},components:{CalendarView:l.a,QBtn:s.b,QIcon:s.f,QFixedPosition:s.e,QModal:s.m,QModalLayout:s.n,QToolbar:s.q,QInput:s.g,QDatetime:s.c,QFab:s.d,QPopover:s.o,QList:s.l,QItem:s.h},validations:{form:{nome:{required:r.required},folga:{required:r.required},preta:{required:r.required},vermelha:{required:r.required}}},methods:{setShowDate:function(e){this.showDate=e},submit:function(){this.$v.form.$touch(),this.$v.form.$error||(this.form.id?this.atualizarEscala(this.form):this.incluirEscala(this.form),this.limparForm(),this.$refs.escalaModal.close(),this.events=this.recuperarEventos())},excluirEscala:function(){this.escalas.delete(this.form),this.limparForm(),this.$refs.escalaModal.close(),this.events=this.recuperarEventos()},incluirEscala:function(e){this.escalas.add(e)},atualizarEscala:function(e){this.escalas.update(e)},calcularEscalas:function(){var e=this.calcularEscala,t=this.escalas.get(),a=[];return t.map(function(t,s){if(t.nome){var r=t;for(a.push(r);o()().add(1,"years").isAfter(r.preta);){var n=e(r);r={id:t.id,nome:t.nome,folga:t.folga,preta:n.preta,vermelha:n.vermelha},a.push(r)}}}),a},calcularEscala:function(e){var t=this.feriados;return{preta:function(e){for(var a=1,s=o()(e.preta).add(1,"days"),r=s.weekday();a<=e.folga||0===r||6===r||t.is(s);)0===r||6===r||t.is(s)||a++,s=o()(s).add(1,"days"),r=s.weekday();return s.toDate()}(e),vermelha:function(e){for(var a=1,s=o()(e.vermelha).add(1,"days"),r=s.weekday();a<=e.folga||0!==r&&6!==r&&!t.is(s);)(0===r||6===r||t.is(s))&&a++,s=o()(s).add(1,"days"),r=s.weekday();return s.toDate()}(e)}},recuperarEventos:function(){var e=[];return this.calcularEscalas().forEach(function(t){e.push({escala_id:t.id,title:t.nome,startDate:t.preta,classes:"preta"}),e.push({escala_id:t.id,title:t.nome,startDate:t.vermelha,classes:"vermelha"})}),e},adicionarEscala:function(){this.limparForm(),this.$refs.escalaModal.open()},alterarEscala:function(e){this.form=this.escalas.getById(e.escala_id),this.$refs.escalaModal.open()},limparForm:function(){this.form={id:null,nome:null,folga:null,preta:null,vermelha:null}}},mounted:function(){this.events=this.recuperarEventos()}}}},[128]);